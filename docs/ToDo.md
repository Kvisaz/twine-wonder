
## Done
- исполняет JavaScript в истории - через try-catch, чтобы ошибки не ломали всю игру

- конфиг через особые passages

## Think
Как насчет полного разделения текста и кода? Как это можно сделать?

Специальные функции в юзерСкрипте?

```js
w.registerTemplate(''); // регистрация шаблона
w.music(url, '#id');
```

### Current - Музыка
Музыка включается рантайм-функцией w.music(url, volume), где url - ссылка на файл в формате MP3, абсолютная или относительно  файла игры.

`volume` - громкость, необязательный параметр, от 0 до 1. По умолчанию 1.

Фоновую музыку для каждой локации можно запрограммировать, записав в пользовательском скрипте код типа 
```js
w.musicFor(locationName1, url, volume);
w.musicFor(locationName2, url, volume);
```

Выключить фоновую музыку 
```js
w.musicStop();
```

По умолчанию музыка зациклена. Чтобы проиграть звуковой эффект без повторения
```js
w.sound(url, volume);
```



#Todo!!
- тест выводы параметров в отдельный шаблон
- добавить фоновую музыку (м.б через скрипты, не текст)

- вывод ошибок в пользовательском JavaScript в специальный дата-объект, т.к. консоль в проде чистится (на самом деле это плохой паттерн - пусть консоль остается)

- специальные пассажи
- wonder.css - свой стиль
- wonder.html - вывод узла

- ВЫВОД ПАРАМЕТРОВ в params
- доработка линка
    - срабатывание скриптов только при нажатии а не при заходе (чтобы первый вход в шахту не генерил события)
    - показ линков при заданных условии    

- задать шаблон через wonder.html (css должен работать и тут)
- задать css через wonder.css
- ТЕСТ В TWINE

- изменение параметров только по клику на выборе (для шахт)
- сохранение состояний?

- первую историю-приключение

etc

## Special Nodes

Движок использует узлы с особыми названиями для хранения данных.

Первый базовый узел - `wonder.config`. Формат конфига - на каждой строке своя опция, типа
```text
uiParam : gold : #gold
```

## Параметры в UI
Параметры - создают параметры и инициализируют их. Можно привязать вывод параметров в шаблон.


Задаются через конфиг строчками
```text
var : gold : 0 : #gold
```
где
- : - разделитель
- uiParam - обязательное начало
- второй элемент - название параметра
- третий элемент - начальное значение
- четвертый элемент (необязательный) - CSS селектор для отображения параметра
