
#Todo для релиза
- [postMessage API](PostMessage.md)
- [Рестарт](Restart.md)


#Вероятный бэклог!



## Done
- [Внешний скрипт](ScriptsExternal.md)
- [Ловить коллекционки](Collectibles.md)
- [Теги для линков на пассажи](LinkTags.md)
- исполняет JavaScript в истории - через try-catch, чтобы ошибки не ломали всю игру
- двойная строка в br/
- история и кнопка back
- история и отметка прочитанного

- конфиг через особые passages

## Think
Как насчет полного разделения текста и кода? Как это можно сделать?

Специальные функции в юзерСкрипте?

```js
w.registerTemplate(''); // регистрация шаблона
w.music(url, '#id');
```


#Todo!!
- история: как поменять формат бэк-кнопки
- история: как поменять настройку отмеченных кнопок
- проверка кастомных пассажей и конфигов

- Wonder.styleUrl убрать, раз не работает

- коллекции
    - настройка и выбор таких страниц
    - помещать страницы в коллекции
    - выводить коллекции
    
- оверлейные страницы   
     - настройка и выбор таких страниц
     - показывать поверх 
     - настройка дизайна
     
    

- проверка музыки, документация

- в линк надо добавлять id ссылки, если нет текста

- добавить фоновую музыку (м.б через скрипты, не текст)

- отмечать уже выбранные варианты в данном сеансе

- вести счетчик посещено/всего узлов - и выдавать достижение или явно индицировать 
чтобы был интерес проходить все локации


- сохранять уже выбранные варианты для следующей игры
    - как-то очищать историю

- добавить tags как вывод в classes
- добавить спец-узлы, вроде глоссария 
    - через специальные теги `glossary`
    - с автовозвратом 
    - возможно с отдельным просмотром, в окне или другом оверлее
    
- добавить как-то "закрыть" (вернуться обратно)

- тест выводы параметров в отдельный шаблон


- вывод ошибок в пользовательском JavaScript в специальный дата-объект, т.к. консоль в проде чистится (на самом деле это плохой паттерн - пусть консоль остается)

- специальные пассажи
- wonder.css - свой стиль
- wonder.html - вывод узла

- ВЫВОД ПАРАМЕТРОВ в params
- доработка линка
    - срабатывание скриптов только при нажатии а не при заходе (чтобы первый вход в шахту не генерил события)
    - показ линков при заданных условии    

- задать шаблон через wonder.html (css должен работать и тут)
- задать css через wonder.css
- ТЕСТ В TWINE

- изменение параметров только по клику на выборе (для шахт)
- сохранение состояний?

- первую историю-приключение

etc

## Special Nodes

Движок использует узлы с особыми названиями для хранения данных.

Первый базовый узел - `wonder.config`. Формат конфига - на каждой строке своя опция, типа
```text
uiParam : gold : #gold
```

## Параметры в UI
Параметры - создают параметры и инициализируют их. Можно привязать вывод параметров в шаблон.


Задаются через конфиг строчками
```text
var : gold : 0 : #gold
```
где
- : - разделитель
- uiParam - обязательное начало
- второй элемент - название параметра
- третий элемент - начальное значение
- четвертый элемент (необязательный) - CSS селектор для отображения параметра
